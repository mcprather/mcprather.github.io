<!DOCTYPE html>
<html>
  <head>
      <meta charset="UTF-8">
      <title>Title of the document</title>
	  <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.1.2/handlebars.min.js"></script>
  </head>

  <body>
      <h2>Handlebars templates to populate a table with an array of objects using Ajax</h2>

      <h3>array of people objects as a table</h3>
          <div id="peopleTable"></div>
  </body>

<!-- The script element is used to define the Handlebars template -->
<script type="text/x-handlebars-template" id="tableTemplate">
<table>
  {{#each rows}}
    <tr>
        <td>{{Name}}</td><td>{{State}}</td><td>{{Age}}</td>
    </tr>
  {{/each}}
</table>

</script>
  
<script>
    var request = new XMLHttpRequest();
    var url = "hb6data.json";

    request.open('GET', url);     // open the request

    // Callback function for when request completes
    request.onload = function() {

        // Extract JSON data from request
        var data = JSON.parse(request.responseText);

        // Update the result div
        if (request.status == 200) {
		      // Get the text for the Handlebars template from the script element.
              var templateText = document.getElementById('tableTemplate').innerHTML;
              // Compile the Handlebars template.
              var compiledTemplateText = Handlebars.compile(templateText);
              // Evaluate the template with an array of people and set the HTML
              compiledHtml = compiledTemplateText({ rows: data })
              document.getElementById('peopleTable').innerHTML = compiledHtml; 	
        }
        else {
            document.querySelector('#peopleTable').innerHTML = "There was an error, or currency symbol not found";
        }
    }

    // Send request
    request.send(null);
  
  
</script>

</html>